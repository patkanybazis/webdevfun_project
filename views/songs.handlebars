<div class="principal">
  <h1 id="music-liby"> Music Library</h1>

  <div class="content-box">
    {{! CREATE SONG BUTTON }}
    {{#if session.isAdmin}}
      <p><a href="/songs/new" class="create-btn">+ Add New Song</a></p>
    {{/if}}

    {{! EMPTY STATE }}
    {{#unless songs.length}}
      <p>No songs found.</p>
    {{/unless}}

    <div class="songs-grid">
      {{#each songs}}
        <div class="song-card">
          <a href="/songs/{{sid}}">
            {{#if cover_url}}
              <img
                src="{{cover_url}}"
                alt="Album cover for {{title}}"
                loading="lazy"
              />
            {{/if}}
            <h4 class="song-title">{{title}}</h4>
            <p class="song-person">{{artist_name}}</p>
          </a>

          {{! ADMIN TOOLS }}
          {{#if @root.session.isAdmin}}
            <div class="admin-tools">
              <a href="/songs/modify/{{sid}}" class="admin-btn">Modify</a>
              <form
                action="/songs/delete/{{sid}}"
                method="POST"
                style="display:inline"
              >
                <button
                  type="submit"
                  class="admin-btn delete-btn"
                  onclick="return confirm('Delete {{title}}?')"
                >
                  Delete
                </button>
              </form>
            </div>
          {{/if}}

        </div>
      {{/each}}
    </div>
  </div>

  {{! PAGINATION }}
  <nav class="pager">
    {{#if pagination}}
      <div>
        {{#if (gt pagination.page 1)}}
          <a href="/songs?page={{decrement pagination.page}}">← Prev</a>
        {{/if}}

        <span>Page {{pagination.page}} of {{pagination.totalPages}}</span>

        {{#if (lt pagination.page pagination.totalPages)}}
          <a href="/songs?page={{increment pagination.page}}">Next →</a>
        {{/if}}
      </div>
    {{/if}}
  </nav>
</div>